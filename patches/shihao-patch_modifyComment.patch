diff --git a/index-server/src/main/java/com/cmri/um/he/index/market/controller/AppMarketAddController.java b/index-server/src/main/java/com/cmri/um/he/index/market/controller/AppMarketAddController.java
new file mode 100644
index 0000000..58f9c56
--- /dev/null
+++ b/index-server/src/main/java/com/cmri/um/he/index/market/controller/AppMarketAddController.java
@@ -0,0 +1,7 @@
+package com.cmri.um.he.index.market.controller;
+
+import com.cmri.spring.common.controller.ZRestController;
+
+public class AppMarketAddController extends ZRestController {
+
+}
diff --git a/index-server/src/main/java/com/cmri/um/he/index/market/dao/AppMarketGeneralDao.java b/index-server/src/main/java/com/cmri/um/he/index/market/dao/AppMarketGeneralDao.java
index 6ed5f54..d59e593 100644
--- a/index-server/src/main/java/com/cmri/um/he/index/market/dao/AppMarketGeneralDao.java
+++ b/index-server/src/main/java/com/cmri/um/he/index/market/dao/AppMarketGeneralDao.java
@@ -89,15 +89,6 @@ public class AppMarketGeneralDao extends BaseDao{
     }
 
     /**
-     * 查询该app的最新月份数据
-     * @param app
-     * @return
-     */
-    public String getNewMonth(Integer app){
-            String  month=  mapper.getNewMonth(app);
-            return  month;
-    }
-    /**
      * 查询次月存留率(根据周区间)
      * @return
      */
@@ -106,15 +97,6 @@ public class AppMarketGeneralDao extends BaseDao{
     }
 
     /**
-     * 查询该app的最新周份数据
-     * @param app
-     * @return
-     */
-    public String getNewWeek(Integer app){
-        String  month=  mapper.getNewWeek(app);
-        return  month;
-    }
-    /**
      * 查询次月存留率(根据日区间)
      * @return
      */
@@ -122,15 +104,6 @@ public class AppMarketGeneralDao extends BaseDao{
         return mapper.getRateByDate(app,month1,month2);
     }
     /**
-     * 查询该app的最新周份数据
-     * @param app
-     * @return
-     */
-    public String getNewDate(Integer app){
-        String  month=  mapper.getNewDate(app);
-        return  month;
-    }
-    /**
      * 查询月活跃用户(根据月份区间)
      * @param app
      * @param month1
diff --git a/index-server/src/main/java/com/cmri/um/he/index/market/mapper/AppMarketGeneralMapper.java b/index-server/src/main/java/com/cmri/um/he/index/market/mapper/AppMarketGeneralMapper.java
index 380e6c4..44c9e64 100644
--- a/index-server/src/main/java/com/cmri/um/he/index/market/mapper/AppMarketGeneralMapper.java
+++ b/index-server/src/main/java/com/cmri/um/he/index/market/mapper/AppMarketGeneralMapper.java
@@ -32,7 +32,7 @@ public interface AppMarketGeneralMapper {
      * @param month2
      * @return
      */
-    @Select("SELECT am.`length_time` as lengthTime,am.`flow` as flow,am.`month` FROM app_market_week am WHERE app=#{app} AND am.`month` BETWEEN #{month1} AND #{month2} ORDER BY am.`month`")
+    @Select("SELECT am.`weekly_duration_per_person` as lengthTime,am.`weekly_dataflow_per_person` as flow,am.`week`AS month FROM app_market_week am WHERE app=#{app} AND am.`week` BETWEEN #{month1} AND #{month2} ORDER BY am.`week`")
     List<Map<String, Object>> getLengthTimeByWeek(@Param("app") Integer app,@Param("month1") String month1,@Param("month2") String month2);
 
     /**
@@ -42,7 +42,7 @@ public interface AppMarketGeneralMapper {
      * @param month2
      * @return
      */
-    @Select("SELECT am.`length_time` as lengthTime,am.`flow` as flow,am.`month` FROM app_market_date am WHERE app=#{app} AND am.`month` BETWEEN #{month1} AND #{month2} ORDER BY am.`month`")
+    @Select("SELECT am.`dately_duration_per_person` as lengthTime,am.`dately_dataflow_per_person` as flow,am.`date`AS month FROM app_market_date am WHERE app=#{app} AND am.`date` BETWEEN #{month1} AND #{month2} ORDER BY am.`date`")
     List<Map<String, Object>> getLengthTimeBydate(@Param("app") Integer app,@Param("month1") String month1,@Param("month2") String month2);
 
     /**
@@ -62,7 +62,7 @@ public interface AppMarketGeneralMapper {
      * @param month2
      * @return
      */
-    @Select("SELECT am.`total_user` AS totalUser,am.`new_user` AS newUser,am.`mau_number` AS mauNumber,am.`keep_rate` AS keepRate,am.`length_time` AS lengthTime,am.`flow` AS flow,am.`month` FROM app_market_week am WHERE app=#{app} AND am.`month` BETWEEN #{month1} AND #{month2} ORDER BY am.`month`\n")
+    @Select("SELECT am.`total_active_num` AS totalUser,am.`new_user` AS newUser,am.`weekly_active` AS mauNumber,am.`active_next_week_retention_rate` AS keepRate,am.`weekly_duration_per_person` AS lengthTime,am.`weekly_dataflow_per_person` AS flow,am.`week` AS month FROM app_market_week am WHERE app=#{app} AND am.`week` BETWEEN #{month1} AND #{month2} ORDER BY am.`week`\n")
     List<Map<String,Object>> quaryGeneralStatisticByWeek(@Param("app")Integer app,@Param("month1")String month1,@Param("month2")String month2);
 
     /**
@@ -72,7 +72,7 @@ public interface AppMarketGeneralMapper {
      * @param month2
      * @return
      */
-    @Select("SELECT am.`total_user` AS totalUser,am.`new_user` AS newUser,am.`mau_number` AS mauNumber,am.`keep_rate` AS keepRate,am.`length_time` AS lengthTime,am.`flow` AS flow,am.`month` FROM app_market_date am WHERE app=#{app} AND am.`month` BETWEEN #{month1} AND #{month2} ORDER BY am.`month`\n")
+    @Select("SELECT am.`total_active_num` AS totalUser,am.`new_user` AS newUser,am.`dately_active` AS mauNumber,am.`active_next_date_retention_rate` AS keepRate,am.`dately_duration_per_person` AS lengthTime,am.`dately_dataflow_per_person` AS flow,am.`date`AS month FROM app_market_date am WHERE app=#{app} AND am.`date` BETWEEN #{month1} AND #{month2} ORDER BY am.`date`\n")
     List<Map<String,Object>> quaryGeneralStatisticByDate(@Param("app")Integer app,@Param("month1")String month1,@Param("month2")String month2);
 
     /**
@@ -87,14 +87,6 @@ public interface AppMarketGeneralMapper {
     List<Map<String, Object>> getRateByMonth(@Param("app")Integer app,@Param("month1")String month1,@Param("month2")String month2);
 
     /**
-     * 查询该app的最新月份数据
-     * @param app
-     * @return
-     */
-    @Select("select month from app_market where app=#{app} order by month desc limit 1")
-    String getNewMonth(@Param("app")Integer app);
-
-    /**
      * 查询次月存留率(根据周区间)
      * @param app
      * @param month1
@@ -102,15 +94,8 @@ public interface AppMarketGeneralMapper {
      * @return
      */
     @Select("select category,app, week ,weekly_active ,active_next_week_retention_rate  from app_market_week \n" +
-            "where app=#{app} and week BETWEEN #{month1} and #{month2} ORDER BY week desc\n")
+            "where app=#{app} and week BETWEEN #{month1} and #{month2} ORDER BY week desc \n")
     List<Map<String, Object>> getRateByWeek(@Param("app")Integer app,@Param("month1")String month1,@Param("month2")String month2);
-    /**
-     * 查询该app的最新周数据
-     * @param app
-     * @return
-     */
-    @Select("select week from app_market_week where app=#{app} order by week desc limit 1")
-    String getNewWeek(@Param("app")Integer app);
 
     /**
      * 查询次月存留率(根据日区间)
@@ -120,15 +105,8 @@ public interface AppMarketGeneralMapper {
      * @return
      */
     @Select("select category,app, date ,dately_active ,active_next_date_retention_rate  from app_market_date \n" +
-            "where app=#{app} and date BETWEEN #{month1} and #{month2} ORDER BY date desc\n")
+            "where app=#{app} and date BETWEEN #{month1} and #{month2} ORDER BY date desc \n")
     List<Map<String, Object>> getRateByDate(@Param("app")Integer app,@Param("month1")String month1,@Param("month2")String month2);
-    /**
-     * 查询该app的最新日数据
-     * @param app
-     * @return
-     */
-    @Select("select date from app_market_date where app=#{app} order by date desc limit 1")
-    String getNewDate(@Param("app")Integer app);
 
     /**
      * 查存月活跃用户(根据月份区间)
@@ -137,7 +115,7 @@ public interface AppMarketGeneralMapper {
      * @param month2
      * @return
      */
-    @Select("SELECT m.app , m.new_user ,m.mau_number,m.month\n" +
+    @Select("SELECT m.app , m.new_user ,m.mau_number,m.month \n" +
             "from app_market m\n" +
             "where m.app=#{app} and m.month BETWEEN #{month1} and #{month2} ORDER BY m.month")
     List<Map<String, Object>> getUserNumberByMonth(@Param("app") Integer app,@Param("month1") String  month1,@Param("month2") String  month2 );
@@ -148,9 +126,9 @@ public interface AppMarketGeneralMapper {
      * @param month2
      * @return
      */
-    @Select("SELECT m.app , m.new_user ,m.mau_number,m.month\n" +
+    @Select("SELECT m.app , m.new_user ,m.weekly_active AS mau_number,m.week AS month\n" +
             "from app_market_week m\n" +
-            "where m.app=#{app} and m.month BETWEEN #{month1} and #{month2} ORDER BY m.month")
+            "where m.app=#{app} and m.week BETWEEN #{month1} and #{month2} ORDER BY m.week")
     List<Map<String, Object>> getUserNumberByWeek(@Param("app") Integer app,@Param("month1") String  month1,@Param("month2") String  month2 );
 
     /**
@@ -160,9 +138,9 @@ public interface AppMarketGeneralMapper {
      * @param month2
      * @return
      */
-    @Select("SELECT m.app , m.new_user ,m.mau_number,m.month\n" +
+    @Select("SELECT m.app , m.new_user ,m.dately_active AS mau_number,m.date AS month\n" +
             "from app_market_date m\n" +
-            "where m.app=#{app} and m.month BETWEEN #{month1} and #{month2} ORDER BY m.month")
+            "where m.app=#{app} and m.date BETWEEN #{month1} and #{month2} ORDER BY m.date")
     List<Map<String, Object>> getUserNumberBydate(@Param("app") Integer app,@Param("month1") String  month1,@Param("month2") String  month2 );
 
     /**
@@ -192,7 +170,7 @@ public interface AppMarketGeneralMapper {
      * @param month2
      * @return
      */
-    @Select(" SELECT am.total_user,am.`month` FROM app_market am WHERE am.app=#{app} and am.`month` BETWEEN #{month1} and #{month2} ")
+    @Select(" SELECT am.total_user,am.`month` FROM app_market am WHERE am.app=#{app} and am.`week` BETWEEN #{month1} and #{month2} ")
     List<Map<String,Object>> getCumulativeListByMonth(@Param("app") int app,@Param("month1") String month1,@Param("month2") String month2);
 
     /**
@@ -202,7 +180,7 @@ public interface AppMarketGeneralMapper {
      * @param month2
      * @return
      */
-    @Select(" SELECT am.total_user,am.`month` FROM app_market_week am WHERE am.app=#{app} and am.`month` BETWEEN #{month1} and #{month2} ")
+    @Select(" SELECT am.total_active_num AS total_user,am.`week` AS month FROM app_market_week am WHERE am.app=#{app} and am.`week` BETWEEN #{month1} and #{month2} ")
     List<Map<String,Object>> getCumulativeListByWeek(@Param("app") int app,@Param("month1") String month1,@Param("month2") String month2);
 
     /**
@@ -212,6 +190,6 @@ public interface AppMarketGeneralMapper {
      * @param month2
      * @return
      */
-    @Select(" SELECT am.total_user,am.`month` FROM app_market_date am WHERE am.app=#{app} and am.`month` BETWEEN #{month1} and #{month2} ")
+    @Select(" SELECT am.total_active_num AS total_user ,am.`date`AS month FROM app_market_date am WHERE am.app=#{app} and am.`date` BETWEEN #{month1} and #{month2} ")
     List<Map<String,Object>> getCumulativeListByDate(@Param("app") int app,@Param("month1") String month1,@Param("month2") String month2);
 }
diff --git a/index-server/src/main/java/com/cmri/um/he/index/market/service/impl/AppMarketGeneralServiceImpl.java b/index-server/src/main/java/com/cmri/um/he/index/market/service/impl/AppMarketGeneralServiceImpl.java
index 5388860..982f150 100644
--- a/index-server/src/main/java/com/cmri/um/he/index/market/service/impl/AppMarketGeneralServiceImpl.java
+++ b/index-server/src/main/java/com/cmri/um/he/index/market/service/impl/AppMarketGeneralServiceImpl.java
@@ -7,10 +7,7 @@ import com.cmri.um.he.index.market.service.AppMarketGeneralService;
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.stereotype.Service;
 
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
+import java.util.*;
 
 /**
  * 默认展示时获取查询时间通用方法
@@ -88,27 +85,24 @@ public class AppMarketGeneralServiceImpl implements AppMarketGeneralService{
                 Map<String, String> defaultTime = DefaultTime.getDefaultTime(Constants.YEAR, 1);
                 String startTime = defaultTime.get("startTime");
                 String endTime = defaultTime.get("endTime");
-                //查询当前月
-                String newMonth= appMarketGeneralDao.getNewMonth(app);
+
                 List list=new ArrayList();
-                int month3= Integer.parseInt(startTime);
-                int month4= Integer.parseInt(endTime);
-                int newMonths=Integer.parseInt(newMonth);
-                if(month4>newMonths){
-                    month4=newMonths;
-                }
-                if(month4>month3){
-                    month2=month1;
-                    List list5=new ArrayList();
-                    List<Map<String, Object>> list1= appMarketGeneralDao.getRateByMonth(app,month1,month2);
-                    Object keep_rate = list1.get(0).get("keep_rate");
-                    list5.add(keep_rate);
-                    list.add(list5);
+                List<Map<String, Object>> maplist= appMarketGeneralDao.getRateByMonth(app,month1,month2);
+                List listmonth=new ArrayList();
+                List listmau=new ArrayList();
+                for (Map<String, Object> ob : maplist) {
+                    Object month = ob.get("month");
+                    listmonth.add(month);
+                    Object mau_number = ob.get("mau_number");
+                    listmau.add(mau_number);
                 }
-                for(int i=month3;i<month4;i++){
-                    int month5=++month3;
-                    month2=Integer.toString(month5);
+                //次月存活率
+                Collections.sort(listmonth);
+                for(int i=0;i<listmonth.size();i++){
+                    month1=(String)listmonth.get(0);
+                    month2=(String)listmonth.get(i);
                     List<Map<String, Object>> list2= appMarketGeneralDao.getRateByMonth(app,month1,month2);
+                    Collections.reverse(list2);
                     List list4=new ArrayList();
                     for (Map<String, Object> obmap : list2) {
                         Object keep_rate = obmap.get("keep_rate");
@@ -116,56 +110,16 @@ public class AppMarketGeneralServiceImpl implements AppMarketGeneralService{
                     }
                     list.add(list4);
                 }
-                //次月存活率
                 map.put("rate",list);
-                List<Map<String, Object>> maplist= appMarketGeneralDao.getRateByMonth(app,month1,month2);
-                List listmonth=new ArrayList();
-                List listmau=new ArrayList();
-                for (Map<String, Object> ob : maplist) {
-                    Object month = ob.get("month");
-                    listmonth.add(month);
-                    Object mau_number = ob.get("mau_number");
-                    listmau.add(mau_number);
-                }
                 String[] st={"时间","活跃用户数(万)","第2月","第3月","第4月","第5月","第6月","第7月","第8月","第9月"};
                 map.put("month",listmonth);
                 map.put("num",listmau);
                 map.put("title",st);
                 lists.add(map);
-
                 return lists;
 
             }else{
-                //查询最新月
-                String newMonth= appMarketGeneralDao.getNewMonth(app);
                 List list=new ArrayList();
-                int month3= Integer.parseInt(month1);
-                int month4= Integer.parseInt(month2);
-                int newMonths=Integer.parseInt(newMonth);
-                if(month4>newMonths){
-                    month4=newMonths;
-                }
-                if(month4>month3){
-                    month2=month1;
-                    List list5=new ArrayList();
-                    List<Map<String, Object>> list1= appMarketGeneralDao.getRateByMonth(app,month1,month2);
-                    Object keep_rate = list1.get(0).get("keep_rate");
-                    list5.add(keep_rate);
-                    list.add(list5);
-                }
-                for(int i=month3;i<month4;i++){
-                    int month5=++month3;
-                    month2=Integer.toString(month5);
-                    List<Map<String, Object>> list2= appMarketGeneralDao.getRateByMonth(app,month1,month2);
-                    List list4=new ArrayList();
-                    for (Map<String, Object> obmap : list2) {
-                        Object keep_rate = obmap.get("keep_rate");
-                        list4.add(keep_rate);
-                    }
-                    list.add(list4);
-                }
-                //次月存活率
-                map.put("rate",list);
                 List<Map<String, Object>> maplist= appMarketGeneralDao.getRateByMonth(app,month1,month2);
                 List listmonth=new ArrayList();
                 List listmau=new ArrayList();
@@ -175,47 +129,31 @@ public class AppMarketGeneralServiceImpl implements AppMarketGeneralService{
                     Object mau_number = ob.get("mau_number");
                     listmau.add(mau_number);
                 }
+                //次月存活率
+
+                for(int i=0;i<listmonth.size();i++){
+                    month1=(String)listmonth.get(i);
+                    month2=(String)listmonth.get(0);
+                    List<Map<String, Object>> list2= appMarketGeneralDao.getRateByMonth(app,month1,month2);
+                    Collections.reverse(list2);
+                    List list4=new ArrayList();
+                    for (Map<String, Object> obmap : list2) {
+                        Object keep_rate = obmap.get("keep_rate");
+                        list4.add(keep_rate);
+                    }
+                    list.add(list4);
+                }
                 String[] st={"时间","活跃用户数(万)","第2月","第3月","第4月","第5月","第6月","第7月","第8月","第9月"};
-                map.put("month",listmonth);
-                map.put("num",listmau);
+                map.put("time",listmonth);
+                map.put("user_number",listmau);
                 map.put("title",st);
+                map.put("rate",list);
                 lists.add(map);
-
                 return lists;
             }
 
         }else if(status.equals("week")){
-            //查询最新周
-            String newWeek= appMarketGeneralDao.getNewWeek(app);
             List list=new ArrayList();
-            int month3= Integer.parseInt(month1);
-            int month4= Integer.parseInt(month2);
-            int newWeeks=Integer.parseInt(newWeek);
-            if(month4>newWeeks){
-                month4=newWeeks;
-            }
-            if(month4>month3){
-                month2=month1;
-                List list5=new ArrayList();
-                List<Map<String, Object>> list1= appMarketGeneralDao.getRateByWeek(app,month1,month2);
-                Object keep_rate = list1.get(0).get("active_next_week_retention_rate");
-                list5.add(keep_rate);
-                list.add(list5);
-            }
-
-            for(int i=month3;i<month4;i++){
-                int month5=++month3;
-                month2=Integer.toString(month5);
-                List<Map<String, Object>> list2= appMarketGeneralDao.getRateByWeek(app,month1,month2);
-                List list4=new ArrayList();
-                for (Map<String, Object> obmap : list2) {
-                    Object keep_rate = obmap.get("active_next_week_retention_rate");
-                    list4.add(keep_rate);
-                }
-                list.add(list4);
-            }
-            //次周存活率
-            map.put("rate",list);
             List<Map<String, Object>> maplist= appMarketGeneralDao.getRateByWeek(app,month1,month2);
             List listweek=new ArrayList();
             List listmau=new ArrayList();
@@ -225,45 +163,29 @@ public class AppMarketGeneralServiceImpl implements AppMarketGeneralService{
                 Object weeky_active = ob.get("weekly_active");
                 listmau.add(weeky_active);
             }
-            String[] st={"时间","活跃用户数(万)","第2周","第3周","第4周","第5周","第6周","第7周","第8周","第9周"};
-            map.put("week",listweek);
-            map.put("weekly_active",listmau);
-            map.put("title",st);
-            lists.add(map);
-
-            return lists;
-        }else {
-            //查询当前日
-            String newDate= appMarketGeneralDao.getNewDate(app);
-            List list=new ArrayList();
-            int month3= Integer.parseInt(month1);
-            int month4= Integer.parseInt(month2);
-            int newDates=Integer.parseInt(newDate);
-            if(month4>newDates){
-                month4=newDates;
-            }
-            if(month4>month3){
-                month2=month1;
-                List list5=new ArrayList();
-                List<Map<String, Object>> list1= appMarketGeneralDao.getRateByDate(app,month1,month2);
-                Object keep_rate = list1.get(0).get("active_next_date_retention_rate");
-                list5.add(keep_rate);
-                list.add(list5);
-            }
-
-            for(int i=month3;i<month4;i++){
-                int month5=++month3;
-                month2=Integer.toString(month5);
-                List<Map<String, Object>> list2= appMarketGeneralDao.getRateByDate(app,month1,month2);
+            //次周存活率
+            for(int i=0;i<listweek.size();i++){
+                month1=(String)listweek.get(i);
+                month2=(String)listweek.get(0);
+                List<Map<String, Object>> list2= appMarketGeneralDao.getRateByWeek(app,month1,month2);
+                Collections.reverse(list2);
                 List list4=new ArrayList();
                 for (Map<String, Object> obmap : list2) {
-                    Object keep_rate = obmap.get("active_next_date_retention_rate");
+                    Object keep_rate = obmap.get("active_next_week_retention_rate");
                     list4.add(keep_rate);
                 }
                 list.add(list4);
             }
-            //次日存活率
+
+            String[] st={"时间","活跃用户数(万)","第2周","第3周","第4周","第5周","第6周","第7周","第8周","第9周"};
+            map.put("time",listweek);
+            map.put("user_number",listmau);
+            map.put("title",st);
             map.put("rate",list);
+            lists.add(map);
+            return lists;
+        }else {
+            List list=new ArrayList();
             List<Map<String, Object>> maplist= appMarketGeneralDao.getRateByDate(app,month1,month2);
             List listdate=new ArrayList();
             List listmau=new ArrayList();
@@ -273,10 +195,24 @@ public class AppMarketGeneralServiceImpl implements AppMarketGeneralService{
                 Object dately_active = ob.get("dately_active");
                 listmau.add(dately_active);
             }
+            //次日存活率
+            for(int i=0;i<listdate.size();i++){
+                month1=(String)listdate.get(i);
+                month2=(String)listdate.get(0);
+                List<Map<String, Object>> list2= appMarketGeneralDao.getRateByDate(app,month1,month2);
+                Collections.reverse(list2);
+                List list4=new ArrayList();
+                for (Map<String, Object> obmap : list2) {
+                    Object keep_rate = obmap.get("active_next_date_retention_rate");
+                    list4.add(keep_rate);
+                }
+                list.add(list4);
+            }
             String[] st={"时间","活跃用户数(万)","第2日","第3日","第4日","第5日","第6日","第7日","第15日","第30日"};
-            map.put("date",listdate);
-            map.put("dately_active",listmau);
+            map.put("time",listdate);
+            map.put("user_number",listmau);
             map.put("title",st);
+            map.put("rate",list);
             lists.add(map);
             return lists;
         }
diff --git a/patches/shihao-patch_modifyComment.patch b/patches/shihao-patch_modifyComment.patch
index 3a807df..3a13355 100644
--- a/patches/shihao-patch_modifyComment.patch
+++ b/patches/shihao-patch_modifyComment.patch
@@ -1,44 +0,0 @@
-diff --git a/patches/shihao-patch_modifyComment.patch b/patches/shihao-patch_modifyComment.patch
-index c7f7eb7..e69de29 100644
---- a/patches/shihao-patch_modifyComment.patch
-+++ b/patches/shihao-patch_modifyComment.patch
-@@ -1,39 +0,0 @@
--diff --git a/index-server/src/main/java/com/cmri/um/he/index/controller/AppMonthController.java b/index-server/src/main/java/com/cmri/um/he/index/controller/AppMonthController.java
--index d673c5c..23c7bd1 100644
----- a/index-server/src/main/java/com/cmri/um/he/index/controller/AppMonthController.java
--+++ b/index-server/src/main/java/com/cmri/um/he/index/controller/AppMonthController.java
--@@ -2,11 +2,15 @@ package com.cmri.um.he.index.controller;
-- 
-- import com.cmri.spring.common.controller.ZRestController;
-- import com.cmri.spring.common.data.ResponseMessage;
---import com.cmri.um.he.index.service.AppEmotionService;
-- import com.cmri.um.he.index.service.AppMonthService;
-- import org.springframework.beans.factory.annotation.Autowired;
---import org.springframework.web.bind.annotation.*;
--+import org.springframework.web.bind.annotation.CrossOrigin;
--+import org.springframework.web.bind.annotation.RequestMapping;
--+import org.springframework.web.bind.annotation.RequestMethod;
--+import org.springframework.web.bind.annotation.RestController;
-- 
--+import javax.servlet.http.Cookie;
--+import javax.servlet.http.HttpServletResponse;
-- import java.util.List;
-- import java.util.Map;
-- 
--@@ -24,10 +28,15 @@ public class AppMonthController extends ZRestController {
--     private AppMonthService appMonthService;
-- 
--     @RequestMapping(method = RequestMethod.GET)
---    public ResponseMessage get(){
--+    public ResponseMessage get(HttpServletResponse response){
--         List<Map<String, Object>> maps = appMonthService.findMonths();
--         ResponseMessage responseMessage = this.genResponseMessage();
--         responseMessage.set("items",maps);
--+        Map<String, Object> map = maps.get(0);
--+        String month = (String)map.get("month");
--+        Cookie cookie=new Cookie("newmonth",month);
--+        cookie.setMaxAge(300);
--+        response.addCookie(cookie);
--         return responseMessage;
--     }
-- }
