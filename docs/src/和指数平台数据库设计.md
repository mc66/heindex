[TOC]

2018-06-04，由[朱寅](mailto:zhuyin@chinamobile.com)创建。

更新历史：

1. 

# 和指数平台数据库设计

## 应用信息表 app_info

```sql
create table app_info(
    id int not null auto_increment,
    name varchar(32) not null comment '应用名',
    category int not null comment '应用类别id',  
	flag int not null comment '是否为移动自有产品 1 是 0 不是', 
	special int comment not null '是否为指定app 1 是 0 不是',
    atime datetime not null comment '记录添加时间',
    primary key(id),
    unique key uk_app_category(name,category)
);

insert into app_info values(null, '腾讯视频', '1', '', '2018-05-24' );
insert into app_info values(null, '支付宝', '2', '', '2018-05-24' );
insert into app_info values(null, '爱奇艺', '1', '', '2018-05-24' );
```



数据示例

```sql
mysql> select * from app_category limit 2;
+----+-----------------+---------------------+
| id | name            | atime               |
+----+-----------------+---------------------+
|  1 | 移动视频类      | 2018-05-24 00:00:00 |
|  2 | 移动支付类      | 2018-05-24 08:40:05 |
+----+-----------------+---------------------+
```

## 应用信息表 app_logo

```sql
create table app_logo(
    id int not null auto_increment,
    app int not null comment '应用id',  
	logo text not null comment 'app logo图片的base64字符串',
    primary key(id),
	unique key uk_app_logo(app)
);

insert into app_info values(null, '腾讯视频', '1', '', '2018-05-24' );
insert into app_info values(null, '支付宝', '2', '', '2018-05-24' );
insert into app_info values(null, '爱奇艺', '1', '', '2018-05-24' );
```

## 应用类别表 app_category

```sql
create table app_category(
    id int not null auto_increment,
    name varchar(32) not null comment '类别名',
    atime datetime not null comment '记录添加时间',
    primary key(id),
    unique key uk_name(name)
);

insert into app_category values(null, '移动视频类', '2018-05-24');
insert into app_category values(null, '移动支付类', '2018-05-24 8:40:05');
```



数据示例

```sql
mysql> select * from app_category limit 2;
+----+-----------------+---------------------+
| id | name            | atime               |
+----+-----------------+---------------------+
|  1 | 移动视频类      | 2018-05-24 00:00:00 |
|  2 | 移动支付类      | 2018-05-24 08:40:05 |
+----+-----------------+---------------------+
```



## 应用月活表 app_mau

```sql
create table app_mau(
    id int not null auto_increment,
    app int not null comment '应用id',
    month char(6) not null comment '月份',
    mau bigint not null comment '月活跃用户数',
    basis double not null comment '环比增幅',
    atime datetime not null comment '记录添加时间',
    primary key(id),
	unique key uk_app_mau(app, month)
);

insert into app_mau values(null, '1', '201712', 581770205, 0.05, '2018-05-24');
insert into app_mau values(null, '2', '201712', 447152212, 0.05, '2018-05-24');
insert into app_mau values(null, '3', '201712', 375532308, 0.05, '2018-05-24');
```



数据示例

```sql
mysql> select * from app_mau limit 2;
+----+-----+--------+-----------+-------+---------------------+
| id | app | month  | mau       | basis | atime               |
+----+-----+--------+-----------+-------+---------------------+
|  1 |   1 | 201712 | 581770205 |  0.05 | 2018-05-24 00:00:00 |
|  2 |   2 | 201712 | 447152212 |  0.05 | 2018-05-24 00:00:00 |
+----+-----+--------+-----------+-------+---------------------+
```

## 应用品质表 app_quality

```sql
create table app_quality(
    id int not null auto_increment,
	app int not null comment '应用id',
	category int comment '应用类别id',  
    features double comment '功能',
	view double comment '界面',
	delay double comment '延时',
	consume double comment '功耗',
	experience double comment '使用体验',
	qindex double comment '体验指数',
	version varchar(32) not null comment '产品版本',
    month char(6) not null comment '月份',
    atime datetime not null comment '记录添加时间',
    primary key(id),
	unique key uk_app_quality(app, month,category)
);


```

## 应用运营表 app_operations

```sql
create table app_operations(
    id int not null auto_increment,
	app int not null comment '应用id',
	category int not null comment '应用类别id',  
    content double comment '内容',
	channel double comment '渠道',
	tariff double comment '资费',
	service double comment '服务',
	market double comment '营销',
	experience double comment '运营体验',
	oindex double comment '运营指数',
	version varchar(32) not null comment '产品版本',
    month char(6) not null comment '月份',
    atime datetime not null comment '记录添加时间',
    primary key(id),
	unique key uk_app_operations(app, month,category)
);


```

## 应用类别描述表 app_summary

```sql
create table app_summary(
    id int not null auto_increment,
	category int not null comment '类别id',
    des1 text not null comment '品质描述',
	des2 text not null comment '运营描述',
    month char(6) not null comment '月份',
    atime datetime not null comment '记录添加时间',
    primary key(id),
	unique key uk_app_summary(category, month)
);


```

## 应用情感表 app_emotion

```sql
create table app_emotion(
    id int not null auto_increment,
	category int not null comment '类别id',
	app int not null comment '应用id',
    t_score double not null comment '净好评率',
	mau_t_score double not null comment 'mau_t_score',
	emotion_raw double not null comment 'emotion_raw',
	z_score double not null comment 'z_score',
	sd int not null comment 'sd',
	avg int not null comment 'avg',
	emotion double not null comment '情感得分',
	features varchar(32) comment '特点',
    month char(6) not null comment '月份',
    atime datetime not null comment '记录添加时间',
    primary key(id),
	unique key uk_app_emotion(category, month)
);


```

## 应用特点表 app_features（废弃）

```sql
create table app_features(
    id int not null auto_increment,
	app int not null comment '应用id',
	features text not null comment '关键特点',
    month char(6) not null comment '月份',
    atime datetime not null comment '记录添加时间',
    primary key(id),
	unique key uk_app_features(app, month)
);


```

## 应用评论表 app_comment

```sql
create table app_comment(
    id int not null auto_increment,
	category int not null comment '类别id',
	app int not null comment '应用id',
	source varchar(32) not null comment '来源',
	comm text not null comment '评论',
    month char(6) not null comment '月份',
    atime datetime not null comment '记录添加时间',
    primary key(id),
	unique key uk_app_comment(category, month,app)
);


```

## 应用延时功耗原始表 app_original_delay

```sql
create table app_original_delay(
    id int not null auto_increment,
	app int not null comment '应用id',
	category int not null comment '类别id',
	version varchar(32) not null comment '应用版本',
	measuring varchar(32) not null comment '测量指标',
	network varchar(32) not null comment '网络环境',
	measure double not null comment '测量值',
	standard double not null comment '达标值',
	challenge double not null comment '挑战值',
	status int not null comment '数据状态',
    month char(6) not null comment '月份',
    atime datetime not null comment '记录添加时间',
    primary key(id)
);

```

## 应用功能界面原始表 app_original_features

```sql
create table app_original_features(
    id int not null auto_increment,
	app int not null comment '应用id',
	category int not null comment '类别id',
	version varchar(32) not null comment '应用版本',
	dimensions varchar(32) not null comment '问题维度',
	des text not null comment '问题描述',
	experience int not null comment '体验影响程度',
	frequency int not null comment '预期发生频率',
	score int not null comment '严重等级得分',
	degree varchar(32) not null comment '严重等级',
	status int not null comment '数据状态',
    month char(6) not null comment '月份',
    atime datetime not null comment '记录添加时间',
    primary key(id)
);

```

## 应用品质计算值表 app_calculation_quality

```sql
create table app_calculation_quality(
    id int not null auto_increment,
	app int not null comment '应用id',
	category int comment '应用类别id',  
    features double comment '功能',
	view double comment '界面',
	delay double comment '延时',
	consume double comment '功耗',
	experience double comment '使用体验',
	version varchar(32) not null comment '产品版本',
	status int not null comment '是否处理 0 未处理 1 处理',
    month char(6) not null comment '月份',
    atime datetime not null comment '记录添加时间',
    primary key(id),
	unique key uk_app_quality(app, month,category)
);


```

