[TOC]

2018-06-04，由[朱寅](mailto:zhuyin@chinamobile.com)创建。

更新历史：

1. 

# 和指数平台服务端接口设计

## 应用月活查询接口

该接口支持按月、应用类别、TopN-M方式等多种方式筛选，查询应用的月活数据。

查询方式为分页查询。

该接口是GET请求。

### 请求URI

```
app-mau
```

### 请求入参

| 元素     | 类型    | 描述                        | 必选 |
| -------- | ------ | --------------------------- | ---- |
| month    | string | 月份，示例`201712`           | 是   |
| page     | int    | 分页查询的请求页，从1开始     | 是   |
| step     | int    | 分页查询的每页请求数          | 是   |
| category | int    | 应用类别                     | 否   |

### 响应出参

| 元素      | 父元素      | 类型          | 描述                            |
| --------- | -----------| ------------- | -------------------------------|
| items     | data       | json list对象 | 分页的当前页面记录列表            |
| page      | data       | int           | 分页的当前页面索引，从1开始计数   |
| size      | data       | int           | 分页的当前页面记录数             |
| pageCount | data       | int           | 分页的总页数                    |
| total     | data       | int           | 总记录数                       |
| app       | items的元素 | string        | 应用名称                       |
| mau       | items的元素 | long          | 月活                           |
| logo      | items的元素 | string        | 应用logo图片的base64字符串      |
| category  | items的元素 | string        | 应用类别                       |
| basis     | items的元素 | double        | 环比增长率                     |
| no        | items的元素 | int           | 应用月活排名                    |

### 请求示例

查询2017年12月份的移动视频类的应用月活。

```
http://localhost:18081/api/app-mau?month=201701&page=1&step=10&category=1
```



```json
{
    "id": "chookin.mac-20180525_162239-0",
    "succeed": true,
    "code": 200,
    "msg": "",
    "data": {
        "items": [{
            "app": "腾讯视频",
            "mau": 581770205,
            "no": 0,
            "logo": "",
            "category": "移动视频类",
            "basis": 0.05
        }, {
            "app": "支付宝",
            "mau": 447152212,
            "no": 1,
            "logo": "",
            "category": "移动支付类",
            "basis": 0.05
        }, {
            "app": "爱奇艺",
            "mau": 375532308,
            "no": 2,
            "logo": "",
            "category": "移动视频类",
            "basis": 0.05
        }],
        "page": 1,
        "pageCount": 1,
        "size": 3,
        "total": 3
    },
    "time": 1527236559855
}
```

### 错误请求示例

#### 1. 缺少入参

请求URL缺少入参`page`。

```
http://localhost:18081/api/app-mau?month=201712&step=10
```

```json
{
    "id": "chookin.mac-20180525_162336-0",
    "succeed": false,
    "code": 400,
    "msg": "java.lang.NullPointerException: page",
    "data": {
        "method": "GET",
        "paras": {
            "month": ["201712"],
            "step": ["10"]
        },
        "path": "/api/app-mau"
    },
    "time": 1527236616757
}
```

#### 2. HTTP Method错误

错误使用了POST方式提交请求。

```json
{
    "id": "chookin.mac-20180525_162519-0",
    "succeed": false,
    "code": 405,
    "msg": "org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported",
    "data": {
        "method": "POST",
        "paras": {
            "month": ["201712"],
            "step": ["10"],
            "page": ["1"]
        },
        "path": "/api/app-mau"
    },
    "time": 1527236719454
}
```

## 应用类别查询接口

该接口查询应用的类别数据。

该接口是GET请求。

### 请求URI

```
app-category
```

### 响应出参

| 元素      | 父元素      | 类型          | 描述                            |
| ---------| ----------- | ------------- | -------------------------------|
| items    | data        | json list对象 |                                |
| id       | items的元素  | int          | 应用id                          |
| name     | items的元素  | string       | 应用名称                        |
| atime    | items的元素  | datetime     | 创建时间                        | 


### 请求示例

查询应用类别数据

```
http://localhost:18081/api/app-category
```



```json
{
	 "id": "chookin.mac-20180525_162519-0",
    "succeed": true,
    "code": 200,
    "msg": "",
    "data": {
        "categorys": [{
            "id": "1",
            "name":"移动视频类报告" ,
            "atime": "2018-04-08 20:45:21",
        },
		{
            "id": "2",
            "name":"移动支付类" ,
            "atime": "2018-04-08 20:45:21",
        }],
    },
    "time": 1527236559855
}
```

## 应用品质查询接口（暂时不用）

该接口查询单个应用的品质数据

该接口是GET请求。

### 请求URI

```
app-quality
```
### 请求入参

| 元素     | 类型    | 描述                       | 必选 |
| -------- | ------ | ---------------------------| ---- |
| month    | string | 月份，示例`201712`          | 是   |
| app      | int    | app的id                    | 是   |


### 响应出参

| 元素      | 父元素        | 类型           | 描述                           |
| --------- | -----------  | ------------- | -------------------------------|
| quality   | data         | json对象       |                               |
| features  | quality的元素 | double        | 功能                           |
| view      | quality的元素 | double        | 界面                           |
| delay     | quality的元素 | double        | 延时                           |
| consume   | quality的元素 | double        | 功耗                           |
| experience| quality的元素 | double        | 使用体验                       |

### 请求示例

查询单个应用品质

```
http://localhost:18081/api/app-quality?app=1&month=201806
```



```json
{
	 "id": "chookin.mac-20180525_162519-0",
    "succeed": true,
    "code": 200,
    "msg": "",
    "data": {
        "quality": [{
            "id": "1",
            "app":"1" ,
			"category":"1" ,
            "features": "78.6",
			 "view": "78.6",
			"delay": "78.6",
			"consume": "78.6",
			"experience": "78.6",
			"month": "201806",
			"atime": "2018-04-08 20:45:21"
			
        }],
    },
    "time": 1527236559855
}
```
## 应用运营查询接口（暂时不用）

该接口查询单个应用的运营数据

该接口是GET请求。

### 请求URI

```
app-operations
```
### 请求入参

| 元素     | 类型    | 描述                       | 必选 |
| -------- | ------ | ---------------------------| ---- |
| month    | string | 月份，示例`201712`          | 是   |
| app      | int    | app的id                    | 是   |


### 响应出参

| 元素       | 父元素        | 类型         | 描述                           |
| ---------  | -----------  | -------------| ----------------------------- |
| operations | data         | json对象     |                               |
| content    | quality的元素 | double      | 内容                           |
| channel    | quality的元素 | double      | 渠道                           |
| tariff     | quality的元素 | double      | 资费                           |
| service    | quality的元素 | double      | 服务                           |
| market     | quality的元素 | double      | 营销                           |
| experience | quality的元素 | double      | 运营体验                       |

### 请求示例

查询单个应用品质

```
http://localhost:18081/api/app-operations?app=1&month=201806
```



```
json
{
	 "id": "chookin.mac-20180525_162519-0",
    "succeed": true,
    "code": 200,
    "msg": "",
    "data": {
        "operations": [{
            "id": "1",
            "app":"1" ,
			"category":"1" ,
            "features": "78.6",
			 "view": "78.6",
			"delay": "78.6",
			"consume": "78.6",
			"experience": "78.6",
			"month": "201806",
			"atime": "2018-04-08 20:45:21"
			
        }],
    },
    "time": 1527236559855
}

```
## 某类应用品质查询接口

该接口根据期数查询选中应用类所有应用的品质数据

该接口是GET请求。

### 请求URI

```
app-quality-list
```
### 请求入参

| 元素     | 类型   | 描述                        | 必选 |
| -------- | ------| --------------------------- | ---- |
| month    | string| 月份，示例`201712`           | 是   |
| category | int   | app类别的id                 | 是   |
| page     | int   | 分页查询的请求页，从1开始     | 是   |
| step     | int   | 分页查询的每页请求数          | 是   |


### 响应出参

| 元素      | 父元素        | 类型          | 描述                            |
| --------- | -----------  | ------------- | -------------------------------|
| items     | data         | json list对象 |                                |
| app       | items的元素   | string       | app名字                         |
| flag      | items的元素   | int          | app标识                         |
| features  | items的元素   | double       | 功能                            |
| view      | items的元素   | double       | 界面                            |
| delay     | items的元素   | double       | 延时                            |
| consume   | items的元素   | double       | 功耗                            |
| experience| items的元素   | double       | 使用体验                         |
| qindex    | items的元素   | double       | 体验指数                         |

### 请求示例

查询应用品质集合

```
http://localhost:18081/api/app-quality-list?month=201806&page=1&step=10&category=1

```


```json
{
	 "id": "chookin.mac-20180525_162519-0",
    "succeed": true,
    "code": 200,
    "msg": "",
    "data": {
        "items": [{
            "app":"爱奇艺" ,
            "features": "78.6",
			 "view": "78.6",
			"delay": "78.6",
			"consume": "78.6",
			"experience": "78.6",
			"qindex": "78.6"
        },
		{
           "app":"优酷" ,
            "features": "78.6",
			 "view": "78.6",
			"delay": "78.6",
			"consume": "78.6",
			"experience": "78.6",
			"qindex": "78.6"
        }
],
    },
    "time": 1527236559855
}
```

## 某类应用运营查询接口

该接口根据期数查询选中应用类所有应用的运营数据

该接口是GET请求。

### 请求URI

```
app-operations-list
```
### 请求入参

| 元素       | 类型   | 描述                         | 必选 |
| --------  | ------ | --------------------------- | ---- |
| month     | string | 月份，示例`201712`           | 是   |
| category  | int    | app类别的id                  | 是   |
| page      | int    | 分页查询的请求页，从1开始     | 是   |
| step      | int    | 分页查询的每页请求数          | 是   |


### 响应出参

| 元素       | 父元素        | 类型          | 描述                           |
| ---------- | -----------  | ------------- | ----------------------------- |
| items      | data         | json list对象 |                               |
| flag       | items的元素   | int          | app标识                        |
| app        | items的元素   | int          | app标识                        |
| content    | items的元素   | double       | 内容                           |
| channel    | items的元素   | double       | 渠道                           |
| tariff     | items的元素   | double       | 资费                           |
| service    | items的元素   | double       | 服务                           |
| market     | items的元素   | double       | 营销                           |
| experience | items的元素   | double       | 运营体验                       |
| oindex     | items的元素   | double       | 运营指数                       |

### 请求示例

查询应用运营集合

```
http://localhost:18081/api/app-operations-list?month=201706&page=1&step=10&category=1
```



```json
{
	 "id": "chookin.mac-20180525_162519-0",
    "succeed": true,
    "code": 200,
    "msg": "",
    "data": {
        "items": [{
            "app":"爱奇艺" ,
            "features": "78.6",
			 "view": "78.6",
			"delay": "78.6",
			"consume": "78.6",
			"experience": "78.6",
			"oindex": "78.6",
			"no": 0

        },
		{
            "app":"优酷" ,
            "features": "78.6",
			 "view": "78.6",
			"delay": "78.6",
			"consume": "78.6",
			"experience": "78.6",
			"oindex": "78.6",
			"no": 1
        },
],
    },
    "time": 1527236559855
}
```
## 某类应用总结查询接口

该接口查询某类应用的总结数据

该接口是GET请求。

### 请求URI

```
app-summary
```
### 请求入参

| 元素      | 类型    | 描述                       | 必选 |
| --------- | ------ | ---------------------------| ---- |
| month     | string | 月份，示例`201712`          | 是   |
| category  | int    | app类别的id                 | 是   |
| flag      | int    | 评论列表标记                 | 是   |


### 响应出参

| 元素      | 父元素          | 类型          | 描述                           |
| --------- | -----------    | ------------- | ------------------------------ |
| summary   | data           | json对象      |                                |
| des       | summary的元素   | string       | 某类应用评论                    |

### 请求示例

查询某类应用情感集合

```
http://localhost:18081/api/app-summary?category=1&month=201707&flag=1

```



```json
{
	 "id": "chookin.mac-20180525_162519-0",
    "succeed": true,
    "code": 200,
    "msg": "",
    "data": {
        "summary": [{
            "des":"很好，很好" 
        }
],
    },
    "time": 1527236559855
}
```
## 某类应用最近4月情感趋势查询接口

该接口查询某类应用最近4月的情感数据

该接口是GET请求。

### 请求URI

```
app-emotion
```
### 请求入参

| 元素      | 类型    | 描述                       | 必选 |
| --------- | ------ | ---------------------------| ---- |
| category  | int    | app类别的id                 | 是   |


### 响应出参

| 元素      | 父元素          | 类型          | 描述                           |
| --------- | -----------    | ------------- | ------------------------------ |
| items     | data           | json list对象 |                                |
| emotion   | items的元素     | double       | 情感得分                        |
| app       | items的元素     | string       | 应用名字                        |
| flag      | items的元素   | int          | app标识                        |

### 请求示例

查询某类应用情感集合

```
http://localhost:18081/api/app-emotion?category=1

```



```json
{
	 "id": "chookin.mac-20180525_162519-0",
    "succeed": true,
    "code": 200,
    "msg": "",
    "data": {
        "items": [{
            "id": "1",
            "app":"优酷" ,
			"emotion":"82.5" ,
			"month": "201806",
			"atime": "2018-04-08 20:45:21"	
        }
],
    },
    "time": 1527236559855
}
```


## 某类应用情感和关键点查询接口

该接口查询应用的情感和关键点数据

该接口是GET请求。

### 请求URI

```
app-features
```
### 请求入参

| 元素     | 类型    | 描述                        | 必选 |
| -------- | ------ | --------------------------- | ---- |
| month    | string | 月份，示例`201712`           | 是   |
| category | int    | app类别的id                 | 是   |



### 响应出参

| 元素      | 父元素          | 类型          | 描述                            |
| --------- | -------------  | ------------- | -------------------------------|
| items     | data           | json list对象 |                                 |
| feature   | items的元素     | string       | 应用特点                        |
| app       | items的元素     | string       | 应用名字                        |
| flag      | items的元素     | int          | 应用标识                        |
| emotion   | items的元素     | double       | 应用分数                        |
 

### 请求示例

查询应用的关键点数据

```
http://localhost:18081/api/app-features?category=1&month=201801

```



```json
{
	 "id": "chookin.mac-20180525_162519-0",
    "succeed": true,
    "code": 200,
    "msg": "",
    "data": {
        "items": [{
            "id": "1",
            "app":"腾讯视频" ,
			"features":"全网独播，内容分类多，客户端稳定" ,
			"emotion":"66.3",
			"flag":"1",
			"month": "201806",
			"atime": "2018-04-08 20:45:21"	
        }
],
    },
    "time": 1527236559855
}
```
## 应用评论查询接口

该接口支持按月、应用类别、TopN-M方式等多种方式筛选，查询应用的评论数据。

该接口是GET请求。

### 请求URI

```
app-comment
```

### 请求入参

| 元素     | 类型    | 描述                        | 必选 |
| -------- | ------ | --------------------------- | ---- |
| month    | string | 月份，示例`201712`           | 是   |
| page     | int    | 分页查询的请求页，从1开始     | 是   |
| step     | int    | 分页查询的每页请求数          | 是   |
| category | int    | 应用类别                     | 是   |

### 响应出参

| 元素      | 父元素       | 类型          | 描述                            |
| --------- | ----------- | ------------- | -------------------------------|
| items     | data        | json list对象 | 分页的当前页面记录列表            |
| page      | data        | int           | 分页的当前页面索引，从1开始计数   |
| size      | data        | int           | 分页的当前页面记录数             |
| pageCount | data        | int           | 分页的总页数                    |
| total     | data        | int           | 总记录数                        |
| app       | items的元素  | string        | 应用名                         |
| source    | items的元素  | string        | 应用来源                       |
| comm      | items的元素  | string        | 应用评论                       |
| logo      | items的元素  | string        | 应用图片                       |
| month     | items的元素  | string        | 月份                           |

### 请求示例

查询2017年12月份的移动视频类的应用评论。

```
http://localhost:18081/api/app-comment?month=201806&page=1&step=10&category=1
```



```json
{
    "id": "chookin.mac-20180525_162239-0",
    "succeed": true,
    "code": 200,
    "msg": "",
    "data": {
        "items": [{
            "app": "爱奇艺",
            "source": "应用宝",
            "comm": "听歌还要钱，差评",
			"logo":"**************"，
			"month": "201806"
        }],
        "page": 1,
        "pageCount": 1,
        "size": 3,
        "total": 3
    },
    "time": 1527236559855
}
```

## 应用月份查询接口

该接口支持应用的日期筛选仅提供倒序6个月。

该接口是GET请求。

### 请求URI

```
app-month
```


### 响应出参

| 元素      | 父元素       | 类型          | 描述                            |
| --------- | ----------- | ------------- | -------------------------------|
| items     | data        | json list对象 |                                |
| month     | items的元素  | strin        |月份                             |
  
### 请求示例

查询所有月份

```
http://192.168.177.1:18081/api/app-month
```



```json
{
    "id": "chookin.mac-20180525_162239-0",
    "succeed": true,
    "code": 200,
    "msg": "成功",
	 "data": {
        "items": [{
            "month": "201804",
        },
		{
            "month": "201805"
        }],
    },
    "time": 1527236559855
}
```

